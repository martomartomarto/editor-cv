<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARTITO'S INTERACTIVE CV EDITOR</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: transparent !important;
        }
        #background-animation-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1; 
            background-color: #f3f4f6;
            overflow: hidden;
        }
        .rolling-head {
            position: absolute;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.25));
            will-change: transform;
        }
        #cv-preview-container {
            width: 21cm;
            padding: 1.5cm;
            background: white;
            color: #1a202c;
            font-size: 10pt;
        }
        #preview-header { 
            display: flex;
            align-items: center;
            gap: 1rem;
            text-align: left; 
            margin-bottom: 1rem;
        }
        #preview-photo {
            width: 3.5cm;
            height: 3.5cm;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid #e2e8f0;
            flex-shrink: 0;
        }
        h1#preview-nombre { font-size: 24pt; font-weight: 600; letter-spacing: 1px; }
        #preview-header-contact { font-size: 9pt; color: #4a5568; margin-top: 0.25rem; }
        #preview-sub-header {
            display: grid;
            grid-template-columns: 1fr 1fr;
            border-top: 1px solid #e2e8f0;
            border-bottom: 1px solid #e2e8f0;
            padding: 0.5rem 0;
            margin-bottom: 1.5rem;
        }
        .sub-header-item {
            display: flex;
            justify-content: space-between;
            padding: 0 1rem;
            font-size: 9pt;
        }
        .sub-header-item:not(:last-child) { border-right: 1px solid #e2e8f0; }
        .sub-header-item span:first-child { font-weight: 600; }
        .section { margin-bottom: 1.25rem; }
        h2.section-title {
            font-size: 10pt;
            font-weight: 700;
            color: #4a5568;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 2px;
            margin-bottom: 0.75rem;
        }
        .section-content { padding-top: 0.25rem; }
        #preview-perfil { font-size: 9.5pt; line-height: 1.6; }
        .item-block { margin-bottom: 1.25rem; }
        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 0.25rem;
        }
        .item-header h3 { font-size: 11pt; font-weight: 600; }
        .item-header .date { font-size: 9pt; color: #718096; white-space: nowrap; }
        .item-block ul { list-style: disc; padding-left: 1.25rem; margin-top: 0.5rem; }
        .item-block li { font-size: 8.5pt; line-height: 1.6; margin-bottom: 0.25rem; }
        .education-institution { font-size: 8.5pt; color: #4a5568; }
        #preview-habilidades-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem 1.5rem;
        }
        .skill-item h3 { font-size: 9.5pt; font-weight: 600; margin-bottom: 2px; }
        .skill-item p { font-size: 8.5pt; color: #4a5568; line-height: 1.5; }
        .item-controls { display: flex; flex-direction: column; gap: 2px; position: absolute; top: 6px; right: 6px; }
        .control-btn { width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; background-color: #f3f4f6; border: 1px solid #d1d5db; border-radius: 50%; font-weight: bold; cursor: pointer; transition: background-color 0.2s; }
        .control-btn:hover { background-color: #e5e7eb; }
        .control-btn.delete-btn { color: #ef4444; }
        .control-btn.move-btn { color: #3b82f6; }
        .export-mode { font-size: 7pt !important; }
        .export-mode h1#preview-nombre { font-size: 21pt !important; }
        .export-mode #preview-header-contact { font-size: 7pt !important; }
        .export-mode .sub-header-item { font-size: 7pt !important; }
        .export-mode h2.section-title { font-size: 8pt !important; }
        .export-mode #preview-perfil { font-size: 7.5pt !important; }
        .export-mode .item-header h3 { font-size: 9pt !important; }
        .export-mode .item-header .date { font-size: 7pt !important; }
        .export-mode .item-block li { font-size: 7pt !important; }
        .export-mode .education-institution { font-size: 7pt !important; }
        .export-mode .skill-item h3 { font-size: 8pt !important; }
        .export-mode .skill-item p { font-size: 7pt !important; }
    </style>
</head>
<body class="bg-gray-100">

    <div id="background-animation-container"></div>

    <div class="container mx-auto p-4 lg:p-8" style="background-color: transparent;">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800">MARTITO'S INTERACTIVE CV EDITOR</h1>
            <p class="text-gray-600 mt-2">Fill, organize, and download your professional CV instantly.</p>
        </header>

        <div class="fixed top-4 right-4 z-50">
            <button id="download-image" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition duration-300 transform hover:scale-105">
                Download Image
            </button>
        </div>

        <div class="flex flex-col lg:flex-row gap-8">
            <div id="editor-column" class="lg:w-1/3 bg-white p-6 rounded-xl shadow-md space-y-6 overflow-y-auto" style="max-height: 80vh;">
                 <div class="p-4 border border-gray-200 rounded-lg">
                    <h2 class="text-xl font-bold mb-4 text-blue-800">Personal Details</h2>
                    <div class="space-y-4">
                        <input type="text" id="nombre" placeholder="Full Name" class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500">
                        <input type="text" id="ubicacion" placeholder="City, Country" class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500">
                        <input type="email" id="email" placeholder="Email" class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500">
                        <input type="tel" id="telefono" placeholder="Phone" class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500">
                        <input type="text" id="fechaNacimiento" placeholder="Date of Birth" class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500">
                        <input type="text" id="nacionalidad" placeholder="Nationality" class="w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500">
                        <label for="photo-upload" class="block text-sm font-medium text-gray-700 mt-4">Profile Photo</label>
                        <input type="file" id="photo-upload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                    </div>
                </div>
                <div class="p-4 border border-gray-200 rounded-lg">
                    <h2 class="text-xl font-bold mb-4 text-blue-800">Profile</h2>
                    <textarea id="perfil" placeholder="Describe your professional profile, strengths, and goals..." class="w-full p-2 border rounded-md h-32 focus:ring-2 focus:ring-blue-500"></textarea>
                </div>
                <div class="p-4 border border-gray-200 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-blue-800">Employment History</h2>
                        <button id="add-experiencia" class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold hover:bg-blue-600">+</button>
                    </div>
                    <div id="experiencia-list" class="space-y-4"></div>
                </div>
                 <div class="p-4 border border-gray-200 rounded-lg">
                    <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-blue-800">Education</h2>
                        <button id="add-educacion" class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold hover:bg-blue-600">+</button>
                    </div>
                    <div id="educacion-list" class="space-y-4"></div>
                </div>
                <div class="p-4 border border-gray-200 rounded-lg">
                     <div class="flex justify-between items-center mb-4">
                        <h2 class="text-xl font-bold text-blue-800">Skills</h2>
                        <button id="add-habilidad" class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold hover:bg-blue-600">+</button>
                    </div>
                    <div id="habilidades-list" class="space-y-4"></div>
                </div>
            </div>

            <div class="lg:w-2/3 flex justify-center items-start overflow-auto">
                 <div id="cv-preview-container" class="bg-white rounded-lg shadow-xl">
                     <div class="w-full">
                        <header id="preview-header">
                            <img id="preview-photo" src="https://placehold.co/400x400/e2e8f0/e2e8f0?text=+" alt="Profile photo placeholder">
                            <div>
                                <h1 id="preview-nombre"></h1>
                                <p id="preview-header-contact"></p>
                            </div>
                        </header>
                        <div id="preview-sub-header">
                            <div class="sub-header-item"><span>Date of birth</span><span id="preview-fechaNacimiento"></span></div>
                            <div class="sub-header-item"><span>Nationality</span><span id="preview-nacionalidad"></span></div>
                        </div>

                        <main id="preview-main-content">
                            <section id="preview-perfil-section" class="section">
                                <h2 class="section-title">Profile</h2>
                                <div id="preview-perfil" class="section-content"></div>
                            </section>
                            <section id="preview-experiencia-section" class="section">
                                <h2 class="section-title">Employment History</h2>
                                <div id="preview-experiencia-list" class="section-content"></div>
                            </section>
                             <section id="preview-educacion-section" class="section">
                                <h2 class="section-title">Education</h2>
                                <div id="preview-educacion-list" class="section-content"></div>
                            </section>
                             <section id="preview-habilidades-section" class="section">
                                <h2 class="section-title">Skills</h2>
                                <div id="preview-habilidades-list" class="section-content"></div>
                            </section>
                        </main>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- INICIO: CÓDIGO PARA LA ANIMACIÓN ---

            // Apuntando a la imagen local en tu proyecto
            const headImageSrc = 'Subject.png';
            
            const heads = [];
            const numHeads = 15;
            const headSize = 90;
            const minSpeed = 0.5;
            const maxSpeed = 1.5;

            function initAnimation() {
                const container = document.getElementById('background-animation-container');
                for (let i = 0; i < numHeads; i++) {
                    const headElement = document.createElement('img');
                    headElement.src = headImageSrc;
                    headElement.className = 'rolling-head';
                    headElement.style.width = `${headSize}px`;
                    headElement.style.height = 'auto';
                    
                    container.appendChild(headElement);

                    heads.push({
                        element: headElement,
                        x: Math.random() * window.innerWidth,
                        y: Math.random() * window.innerHeight,
                        vx: (Math.random() * (maxSpeed - minSpeed) + minSpeed) * (Math.random() < 0.5 ? 1 : -1),
                        vy: (Math.random() * (maxSpeed - minSpeed) + minSpeed) * (Math.random() < 0.5 ? 1 : -1),
                        rotation: Math.random() * 360,
                        rotationSpeed: (Math.random() - 0.5) * 2,
                    });
                }
            }

            function animate() {
                heads.forEach(head => {
                    head.x += head.vx;
                    head.y += head.vy;
                    head.rotation += head.rotationSpeed;

                    if (head.x < 0 || head.x > window.innerWidth - headSize) {
                        head.vx *= -1;
                    }
                    if (head.y < 0 || head.y > window.innerHeight - headSize) {
                        head.vy *= -1;
                    }

                    head.element.style.transform = `translate(${head.x}px, ${head.y}px) rotate(${head.rotation}deg)`;
                });

                requestAnimationFrame(animate);
            }
            
            // --- Resto del script ---
            const fields = ['nombre', 'ubicacion', 'email', 'telefono', 'fechaNacimiento', 'nacionalidad', 'perfil'];
            const lists = ['experiencia', 'educacion', 'habilidades'];

            window.deleteItem = (itemId) => { document.getElementById(`form-${itemId}`)?.remove(); saveData(); updatePreview(); };
            window.moveItemUp = (itemId) => { const formItem = document.getElementById(`form-${itemId}`); if (formItem?.previousElementSibling) { formItem.parentNode.insertBefore(formItem, formItem.previousElementSibling); saveData(); updatePreview(); } };
            window.moveItemDown = (itemId) => { const formItem = document.getElementById(`form-${itemId}`); if (formItem?.nextElementSibling) { formItem.parentNode.insertBefore(formItem.nextElementSibling, formItem); saveData(); updatePreview(); } };

            const saveData = () => {
                fields.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) localStorage.setItem(id, element.value);
                });
                lists.forEach(listName => {
                    const items = Array.from(document.querySelectorAll(`#${listName}-list .item-form`)).map(form => { const itemData = {}; form.querySelectorAll('input, textarea').forEach(input => { itemData[input.dataset.key] = input.value; }); return itemData; });
                    localStorage.setItem(`${listName}List`, JSON.stringify(items));
                });
                const photoSrc = document.getElementById('preview-photo').src;
                if(photoSrc && !photoSrc.startsWith('https://placehold.co')) {
                    localStorage.setItem('userPhoto', photoSrc);
                }
                localStorage.setItem('isDataSaved', 'true');
            };

            const updatePreview = () => {
                document.getElementById('preview-nombre').textContent = document.getElementById('nombre').value;
                const headerContactParts = [
                    document.getElementById('ubicacion').value,
                    document.getElementById('telefono').value,
                    document.getElementById('email').value
                ];
                document.getElementById('preview-header-contact').textContent = headerContactParts.filter(Boolean).join('  ·  ');
                document.getElementById('preview-fechaNacimiento').textContent = document.getElementById('fechaNacimiento').value;
                document.getElementById('preview-nacionalidad').textContent = document.getElementById('nacionalidad').value;
                document.getElementById('preview-perfil').textContent = document.getElementById('perfil').value;
               
                lists.forEach(listName => {
                    const previewListContainer = document.getElementById(`preview-${listName}-list`);
                    previewListContainer.innerHTML = ''; 
                    const items = JSON.parse(localStorage.getItem(`${listName}List`)) || [];
                    items.forEach(item => {
                         const previewDiv = document.createElement('div');
                         updateListPreview(listName, previewDiv, item);
                         previewListContainer.appendChild(previewDiv);
                    });
                });
            };

            const addToList = (listName, data = {}) => {
                const listContainer = document.getElementById(`${listName}-list`);
                const itemId = `${listName}-${Date.now()}-${Math.random()}`;

                const formDiv = document.createElement('div');
                formDiv.className = 'item-form p-3 border border-gray-200 rounded-md relative pr-10';
                formDiv.id = `form-${itemId}`;
               
                let formContent = '';
                if (listName === 'experiencia') { formContent = `<input type="text" data-key="puesto" placeholder="Position, Company" class="w-full p-1 mb-2 border rounded-md" value="${data.puesto || ''}"><input type="text" data-key="fecha" placeholder="Date (e.g., Apr 2023 - Present)" class="w-full p-1 mb-2 border rounded-md" value="${data.fecha || ''}"><textarea data-key="descripcion" placeholder="Description (one achievement per line)" class="w-full p-1 border rounded-md h-24">${data.descripcion || ''}</textarea>`; } 
                else if (listName === 'educacion') { formContent = `<input type="text" data-key="titulo" placeholder="Degree / Title" class="w-full p-1 mb-2 border rounded-md" value="${data.titulo || ''}"><input type="text" data-key="institucion" placeholder="Institution & Location" class="w-full p-1 mb-2 border rounded-md" value="${data.institucion || ''}"><input type="text" data-key="fecha" placeholder="Date (e.g., Jul 2013 - Jul 2017)" class="w-full p-1 border rounded-md" value="${data.fecha || ''}">`; } 
                else if (listName === 'habilidades') { formContent = `<input type="text" data-key="categoria" placeholder="Category (e.g., Business Intelligence)" class="w-full p-1 mb-2 border rounded-md" value="${data.categoria || ''}"><textarea data-key="lista" placeholder="Skills (comma-separated)" class="w-full p-1 border rounded-md h-16">${data.lista || ''}</textarea>`; }
               
                const controls = `<div class="item-controls"><button onclick="moveItemUp('${itemId}')" class="control-btn move-btn" title="Move up">&uarr;</button><button onclick="moveItemDown('${itemId}')" class="control-btn move-btn" title="Move down">&darr;</button><button onclick="deleteItem('${itemId}')" class="control-btn delete-btn" title="Delete">&times;</button></div>`;
                formDiv.innerHTML = formContent + controls;
                listContainer.appendChild(formDiv);
               
                formDiv.querySelectorAll('input, textarea').forEach(input => {
                    input.addEventListener('input', () => { saveData(); updatePreview(); });
                });
            };
           
            const updateListPreview = (listName, previewDiv, data) => {
                 if (listName === 'experiencia') { 
                     previewDiv.className = 'item-block';
                     previewDiv.innerHTML = `<div class="item-header"><h3>${data.puesto || ''}</h3><p class="date">${data.fecha || ''}</p></div><ul>${(data.descripcion || '').split('\n').map(line => line.trim() ? `<li>${line.trim()}</li>` : '').join('')}</ul>`; 
                 } else if (listName === 'educacion') {
                     previewDiv.className = 'item-block';
                     previewDiv.innerHTML = `<div class="item-header"><h3>${data.titulo || ''}</h3><p class="date">${data.fecha || ''}</p></div><p class="education-institution">${data.institucion || ''}</p>`;
                 } else if (listName === 'habilidades') {
                     previewDiv.className = 'skill-item';
                     previewDiv.innerHTML = `<div><h3>${data.categoria || ''}</h3><p>${data.lista || ''}</p></div>`;
                 }
            };

            const loadSampleData = () => {
                const sampleData = {
                    nombre: 'Martín Mastrogiacomo',
                    ubicacion: 'Buenos Aires, Argentina',
                    email: 'martomastrogiacomo@gmail.com',
                    telefono: '+549 11 5 890 7085',
                    fechaNacimiento: '09/02/1995',
                    nacionalidad: 'Argentinean, Italian',
                    perfil: `Results-driven Growth & Business Intelligence Specialist with a strong background in data analytics, digital marketing, and automation. Proven ability to leverage SQL, Tableau, Amazon Redshift, and A/B testing to drive growth, optimize user journeys, and enhance data-driven decision-making. Passionate about bridging the gap between marketing strategy and business intelligence to scale operations and maximize impact. Experienced in designing high-impact dashboards, automation scripts, and customer engagement strategies to improve performance and efficiency.`,
                    experienciaList: [{puesto:"Growth Lead, Ontop", fecha:"Apr 2025 — Present",descripcion:"Lead the overall growth strategy, integrating paid media, organic, and referral channels to drive customer acquisition and revenue.\nDesign and optimize multi-channel marketing campaigns (Google Ads, LinkedIn Ads, Braze) focused on activation, retention, and reducing churn.\nAnalyze data (SQL, Tableau, Salesforce) to refine the ICP, segment audiences, and identify growth opportunities across the funnel.\nCollaborate cross-functionally with Sales & Product to align initiatives and ensure a seamless user experience."}, {puesto:"Growth & BI Specialist, Ontop, Buenos Aires", fecha:"Apr 2023 — Apr 2025",descripcion:"Increased conversion rates by 10% through A/B testing and experimentation on landing pages and onboarding flows.\nBoosted retention rates by 15% by optimizing lifecycle marketing strategies and refining CRM automations.\nDeveloped predictive cohort analysis that reduced churn by 15%, identifying key drop-off points and implemented targeted retention efforts.\nAutomated Tableau dashboards that provide real-time marketing insights, reducing decision-making time by 30% and enhancing reporting efficiency.\nEnhanced paid media ROAS by 25% through in-depth attribution modeling and cross-channel campaign optimization.\nSaved 10+ hours per week by automating data processes in Google Sheets, improving operational efficiency."}, {puesto:"BI Specialist, Flippin, Buenos Aires", fecha:"May 2022 — Dec 2022",descripcion:"Optimized investment decisions for real estate clients by designing data-driven reports, increasing portfolio ROI by 12%.\nImplemented web scraping solutions that accelerated market trend analysis by 40%, providing real-time pricing insights.\nDeveloped WhatsApp chatbots that improved lead generation, reducing customer response time by 35%."}, {puesto:"Managment Consultant CS&S, Accenture, Buenos Aires", fecha:"Aug 2021 — Apr 2022",descripcion:"Led Salesforce CPQ software implementation for enterprise clients.\nProvided pricing and sales strategy consulting, optimizing revenue operations.\nManaged Jira workflows, improving cross-functional collaboration and project execution speed."}],
                    educacionList: [{titulo:"Data Analytics",institucion:"Digital House, Buenos Aires",fecha:"Apr 2020 — Sep 2020"},{titulo:"Business Administration Degree",institucion:"Universidad de San Andres, Buenos Aires",fecha:"Jul 2013 — Jul 2017"},{titulo:"Bilingual Bachelor",institucion:"Saint Gregory's College, Buenos Aires",fecha:"Feb 2010 — Dec 2012"}],
                    habilidadesList: [{categoria:"Growth Strategy & Analytics",lista:"A/B Testing, Funnel Optimization, Cohort Analysis"},{categoria:"Business Intelligence",lista:"Tableau, Power BI, Looker/Data Studio"},{categoria:"Databases & SQL",lista:"Amazon Redshift, MySQL"},{categoria:"Automation & Scripting",lista:"Google Sheets Scripts, Alteryx"},{categoria:"Project Management",lista:"Jira, Agile Methodologies"},{categoria:"Data Integration",lista:"Zendesk, Jira, Financial Data"}]
                };

                fields.forEach(id => { const input = document.getElementById(id); if (input && sampleData[id]) input.value = sampleData[id]; });
                lists.forEach(listName => { const listKey = `${listName}List`; if (sampleData[listKey]) { sampleData[listKey].forEach(item => addToList(listName, item)); } });
            };

            const loadDataFromStorage = () => {
                fields.forEach(id => { const savedValue = localStorage.getItem(id); if (savedValue !== null) document.getElementById(id).value = savedValue; });
                lists.forEach(listName => { const savedList = JSON.parse(localStorage.getItem(`${listName}List`)); if (savedList) savedList.forEach(itemData => addToList(listName, itemData)); });
                const savedPhoto = localStorage.getItem('userPhoto');
                if (savedPhoto) {
                    document.getElementById('preview-photo').src = savedPhoto;
                }
            };

            const initializeApp = () => {
                fields.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', () => { saveData(); updatePreview(); });
                    }
                });

                lists.forEach(listName => {
                    const addButton = document.getElementById(`add-${listName}`);
                    if (addButton) {
                        addButton.addEventListener('click', () => { addToList(listName); saveData(); updatePreview(); });
                    }
                });
               
                document.getElementById('photo-upload').addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            document.getElementById('preview-photo').src = e.target.result;
                            saveData();
                        };
                        reader.readAsDataURL(file);
                    }
                });

                document.getElementById('download-image').addEventListener('click', () => {
                    const cvPreview = document.getElementById('cv-preview-container');
                    const downloadButton = document.getElementById('download-image');
                   
                    downloadButton.textContent = 'Generating...';
                    downloadButton.disabled = true;

                    cvPreview.classList.add('export-mode');

                    html2canvas(cvPreview, { 
                        scale: 3, 
                        useCORS: true, 
                        logging: false,
                        windowWidth: cvPreview.scrollWidth,
                        windowHeight: cvPreview.scrollHeight
                    }).then(canvas => {
                        cvPreview.classList.remove('export-mode');

                        const link = document.createElement('a');
                        link.download = 'professional-cv.png';
                        link.href = canvas.toDataURL('image/png');
                        link.click();
                       
                        downloadButton.textContent = 'Download Image';
                        downloadButton.disabled = false;

                    }).catch(err => {
                        console.error("Error generating image:", err);
                        cvPreview.classList.remove('export-mode');
                        downloadButton.textContent = 'Download Image';
                        downloadButton.disabled = false;
                    });
                });
               
                if (localStorage.getItem('isDataSaved')) { 
                    loadDataFromStorage(); 
                } else { 
                    loadSampleData(); 
                    saveData();
                }
               
                updatePreview(); 
                
                initAnimation();
                animate();
            };

            initializeApp();
        });
    </script>
</body>
</html>
